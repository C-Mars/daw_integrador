<p-card header="ACTIVIDADES" class="w-auto md:min-w-max">
  <ng-template pTemplate="content">
    <div class="mb-4 flex flex-wrap w-auto md:align-self-auto align-self-end flex align-items-end justify-content-end pl-3">
      <p-button
        class="accion"
        id="añadir"
        label="Añadir"
        icon="pi pi-plus"
        [rounded]="true"
        severity="info"
        (onClick)="nuevo()"
      ></p-button>
    </div>
    <p-table
      [value]="actividades"
      [paginator]="true"
      [rows]="5"
      [tableStyle]="{ 'min-width': '70rem' }"
      [rowsPerPageOptions]="[5, 10, 20]"
      class="flex flex-wrap w-4 md:w-max"
    >
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="idCliente" style="width:10%">
            ID Cliente <p-sortIcon field="idCliente" />
          </th>
          <th pSortableColumn="descripcion" style="width:20%">
            Descripción <p-sortIcon field="descripcion" />
          </th>
          <th pSortableColumn="idUsuarioActual" style="width:10%">
            ID Usuario Actual <p-sortIcon field="idUsuarioActual" />
          </th>
          <th pSortableColumn="prioridad" style="width:10%">
            Prioridad <p-sortIcon field="prioridad" />
          </th>
          <th pSortableColumn="idUsuarioModificacion" style="width:10%">
            ID Usuario Modificación <p-sortIcon field="idUsuarioModificacion" />
          </th>
          <th pSortableColumn="fechaModificacion" style="width:20%">
            Fecha Modificación <p-sortIcon field="fechaModificacion" />
          </th>
          <th pSortableColumn="fechaInicio" style="width:20%">
            Fecha Inicio <p-sortIcon field="fechaInicio" />
          </th>
          <th>Herramientas</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-actividad>
        <tr>
          <td>{{ actividad.idCliente }}</td>
          <td>{{ actividad.descripcion }}</td>
          <td>{{ actividad.idUsuarioActual }}</td>
          <td>{{ actividad.prioridad }}</td>
          <td>{{ actividad.idUsuarioModificacion }}</td>
          <td>{{ actividad.fechaModificacion | date }}</td>
          <td>{{ actividad.fechaInicio | date }}</td>
          <td class="flex flex-wrap p-2">
            <p-button
              class="accion"
              pRipple
              icon="pi pi-pen-to-square"
              class="mr-2 pb-2 pt-4"
              [rounded]="true"
              severity="primary"
              pTooltip="Editar"
              (onClick)="editarActividad(actividad)"
            ></p-button>
            <p-button
              pRipple
              class="mr-2 pb-2 pt-4"
              icon="pi pi-trash"
              severity="info"
              [rounded]="true"
              pTooltip="Eliminar"
              (click)="eliminarActividad(actividad.id)"
            ></p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </ng-template>
</p-card>

<app-crear-actividad
  [(displayDialog)]="displayNewDialog"
  (refresh)="cargarActividades()"
  (close)="displayNewDialog = false"
></app-crear-actividad>

<app-editar-actividad
  [(actividad)]="selectedActividad"
  [(displayDialog)]="displayEditDialog"
  (refresh)="cargarActividades()"
  (close)="displayEditDialog = false"
></app-editar-actividad>

<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>
